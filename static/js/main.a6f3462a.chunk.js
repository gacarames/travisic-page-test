(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(e,t){},51:function(e,t,n){e.exports=n(67)},56:function(e,t,n){},67:function(e,t,n){"use strict";n.r(t);var a=n(50),r=n(0),i=n.n(r),o=n(40),c=n.n(o),l=(n(56),n(9)),s=n(10),u=n(12),m=n(11),p=n(13),d=n(18),f=n(23),v=n(19),h=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=localStorage.getItem(v.AUTH_TOKEN);return i.a.createElement("div",{className:"flex pa1 justify-between nowrap orange"},i.a.createElement("div",{className:"flex flex-fixed black"},i.a.createElement("div",{className:"fw7 mr1"},"Hacker News"),i.a.createElement(f.b,{to:"/",className:"ml1 no-underline black"},"new"),t&&i.a.createElement("div",{className:"flex"},i.a.createElement("div",{className:"ml1"},"|"),i.a.createElement(f.b,{to:"/create",className:"ml1 no-underline black"},"submit"))),i.a.createElement("div",{className:"flex flex-fixed"},t?i.a.createElement("div",{className:"ml1 pointer black",onClick:function(){localStorage.removeItem(v.AUTH_TOKEN),e.props.history.push("/")}},"logout"):i.a.createElement(f.b,{to:"/login",className:"ml1 no-underline black"},"login")))}}]),t}(r.Component),b=Object(d.f)(h),g=n(20);function E(e){return function(e,t){var n=e-t;return n<2e4?"just now":n<6e4?"less than 1 min ago":n<36e5?Math.round(n/6e4)+" min ago":n<864e5?Math.round(n/36e5)+" h ago":n<2592e6?Math.round(n/864e5)+" days ago":n<31536e6?Math.round(n/2592e6)+" mo ago":Math.round(n/31536e6)+" years ago"}((new Date).getTime(),new Date(e).getTime())}var k=n(17),O=n(21),j=n.n(O);function w(){var e=Object(g.a)(["\n      mutation VoteMutation($linkId: ID!) {\n        vote(linkId: $linkId) {\n          id\n          link {\n            votes {\n              id\n              user {\n                id\n              }\n            }\n          }\n          user {\n            id\n          }\n        }\n      }\n    "]);return w=function(){return e},e}var y=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=j()(w()),t=localStorage.getItem(v.AUTH_TOKEN);return i.a.createElement("div",{className:"flex mt2 items-start"},i.a.createElement("div",{className:"flex items-center"},i.a.createElement("span",{className:"gray"},this.props.index+1,"."),t&&i.a.createElement(k.b,{mutation:e,variables:{linkId:this.props.link.id}},function(e){return i.a.createElement("div",{className:"ml1 gray f11",onClick:e},"\u25b2")})),i.a.createElement("div",{className:"ml1"},i.a.createElement("div",null,this.props.link.description," (",this.props.link.url,")"),i.a.createElement("div",{className:"f6 lh-copy gray"},this.props.link.votes.length," votes | by"," ",this.props.link.postedBy?this.props.link.postedBy.name:"Unknown"," ",E(this.props.link.createdAt))))}}]),t}(r.Component);function N(){var e=Object(g.a)(["\n      {\n        feed {\n          links {\n            id\n            createdAt\n            url\n            description\n            postedBy {\n              id\n              name\n            }\n            votes {\n              id\n              user {\n                id\n              }\n            }\n          }\n        }\n      }\n    "]);return N=function(){return e},e}var x=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=j()(N());return i.a.createElement(k.c,{query:e},function(e){var t=e.loading,n=e.error,a=e.data;if(t)return i.a.createElement("div",null,"Fetching");if(n)return i.a.createElement("div",null,"Error");var r=a.feed.links;return i.a.createElement("div",null,r.map(function(e,t){return i.a.createElement(y,{key:e.id,link:e,index:t})}))})}}]),t}(r.Component);function S(){var e=Object(g.a)(["\n      mutation PostMutation($description: String!, $url: String!) {\n        post(description: $description, url: $url) {\n          id\n          createdAt\n          url\n          description\n        }\n      }\n    "]);return S=function(){return e},e}var C=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={description:"",url:""},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=j()(S()),n=this.state,a=n.description,r=n.url;return i.a.createElement("div",null,i.a.createElement("div",{className:"flex flex-column mt3"},i.a.createElement("input",{className:"mb2",value:a,onChange:function(t){return e.setState({description:t.target.value})},type:"text",placeholder:"A description for the link"}),i.a.createElement("input",{className:"mb2",value:r,onChange:function(t){return e.setState({url:t.target.value})},type:"text",placeholder:"The URL for the link"})),i.a.createElement(k.b,{mutation:t,variables:{description:a,url:r},onCompleted:function(){return e.props.history.push("/")}},function(e){return i.a.createElement("button",{onClick:e},"Submit")}))}}]),t}(r.Component),$=n(37),T=n.n($),A=n(46);function I(){var e=Object(g.a)(["\n      mutation LoginMutation($email: String!, $password: String!) {\n        login(email: $email, password: $password) {\n          token\n        }\n      }\n    "]);return I=function(){return e},e}function U(){var e=Object(g.a)(["\n      mutation SignupMutation(\n        $email: String!\n        $password: String!\n        $name: String!\n      ) {\n        signup(email: $email, password: $password, name: $name) {\n          token\n        }\n      }\n    "]);return U=function(){return e},e}var M=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={login:!0,email:"",password:"",name:""},n._confirm=function(){var e=Object(A.a)(T.a.mark(function e(t){var a,r;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=n.state.login?t.login:t.signup,r=a.token,n._saveUserData(r),n.props.history.push("/");case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n._saveUserData=function(e){localStorage.setItem(v.AUTH_TOKEN,e)},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=j()(U()),n=j()(I()),a=this.state,r=a.login,o=a.email,c=a.password,l=a.name;return i.a.createElement("div",null,i.a.createElement("h4",{className:"mv3"},r?"Login":"Sign Up"),i.a.createElement("div",{className:"flex flex-column"},!r&&i.a.createElement("input",{value:l,onChange:function(t){return e.setState({name:t.target.value})},type:"text",placeholder:"Your name"}),i.a.createElement("input",{value:o,onChange:function(t){return e.setState({email:t.target.value})},type:"text",placeholder:"Your email address"}),i.a.createElement("input",{value:c,onChange:function(t){return e.setState({password:t.target.value})},type:"password",placeholder:"Choose a safe password"})),i.a.createElement("div",{className:"flex mt3"},i.a.createElement(k.b,{mutation:r?n:t,variables:{email:o,password:c,name:l},onCompleted:function(t){return e._confirm(t)}},function(e){return i.a.createElement("div",{className:"pointer mr2 button",onClick:e},r?"login":"create account")}),i.a.createElement("div",{className:"pointer button",onClick:function(){return e.setState({login:!r})}},r?"need to create an account?":"already have an account?")))}}]),t}(r.Component),_=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"center w85"},i.a.createElement(b,null),i.a.createElement("div",{className:"ph3 pv1 background-gray"},i.a.createElement(d.c,null,i.a.createElement(d.a,{exact:!0,path:"/",component:x}),i.a.createElement(d.a,{exact:!0,path:"/create",component:C}),i.a.createElement(d.a,{exact:!0,path:"/login",component:M}))))}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var B=n(47),H=n(26),D=n(49),K=n(48),L=Object(D.a)({uri:"http://localhost:4000"}),J=Object(B.a)(function(e,t){var n=t.headers,r=localStorage.getItem(v.AUTH_TOKEN);return{headers:Object(a.a)({},n,{authorization:r?"Bearer ".concat(r):""})}}),W=new H.a({link:J.concat(L),cache:new K.a});c.a.render(i.a.createElement(f.a,null,i.a.createElement(k.a,{client:W},i.a.createElement(_,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[51,1,2]]]);
//# sourceMappingURL=main.a6f3462a.chunk.js.map